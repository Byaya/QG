#QG手游组第五周周记
##生活随记
这个星期很有意思，两门选修考试+一次很不错的小组作业，让我开始感觉到自己不能再摸鱼了，这个星期有三天是在搞Direct3D，因为自己菜，所以看了很多的资料才慢慢完成小组作业，不过这样的作业还是很不错的，在这次作业中学到了很多东西，不过很不爽的是感觉课程作业落下了很多，下个星期还是在抽多点时间做作业吧。不然作业又要拖交了。
##本周学习
1、提升CPU和GPU效率的方法：创建帧资源

（1）定义：帧资源是一个每帧都需要CPU进行修改的资源所构成的环形数组

（2）作用：可以令CPU不需要等待GPU执行完当前任务，便可以进行下一帧的处理工作，不过CPU的处理速度一般比GPU快，所以CPU会在某些时刻等待GPU，此时便可以让CPU处理其他的一些数据（逻辑，AI等）

2、材质的三大属性：

（1）表面反射光和吸收光的颜色
（2）表面下材质的折射率
（3）表面的光滑度和透明度


3、材质的简单结构体实现

（1）材质的唯一对应名称
（2）材质的常量缓冲区索引
（3）判断材质是否更新的标志
（4）用于着色器的材质常量缓冲区的数据

4、光照的常用辅助函数

（1）CalcAttenuation：实现了一种线性衰减因子的计算方法，可以将其应用于点光源和聚光灯之间

（2）SchlickFresnel：此函数基于光向量和表面法向量之间的夹角，并根据菲涅尔效应近似的计算出以表面法向量为法线的表面所反射光的百分比

（3）BlinnPhong：计算反射到观察者眼中的光量（光量 = 漫反射光量 + 镜面反射光量）。

5、纹理的创建以及启用

（1）加载DDS文件（创建纹理资源）

（2）为即将创建的着色器资源视图（SRV）描述符创建一个描述符堆，以此使用该堆来存储着色器资源视图描述符

（3）为纹理资源创建一个SRV（着色器资源视图）描述符，并将其设置到一个根签名参数槽以方便着色器程序使用。

（4）将纹理绑定到流水线中

6、采样器对象

（1）作用：采样器对象可以对纹理资源进行采集，采集纹理资源时所用的过滤器和寻址模式都是由采样器对象定义的

（2）创建采样器的方法

{

1、创建一个采样器堆用来存放采样器描述符

2、创建采样器描述符，在采样器描述符中指定寻址模式、过滤器类型以及其他的一些参数

}

（3）静态采样器，Direct3D专门提供了一种特殊的方式，使用户可以在不创建采样器堆的情况下对采样器进行配置


7、在着色器中对纹理进行采样

（1）采样器寄存器有sn指定，其中n代表采样器寄存器的槽号

（2）在像素着色器中可以为每一个像素指定其相应的纹理坐标（u，v），并通过Textrue2D ：Sample方法进行纹理采样

8、纹理变换和纹理动画

（1）纹理变化可以使用纹理变换矩阵在顶点着色器中对输入的纹理坐标进行变换，其中纹理是2D向量，所以z坐标的变换不会对纹理坐标造成任何影响

（2）纹理动画的实现需要在每一个更新周期中使用AnimateMaterials方法，并根据时间函数在纹理平面中对纹理坐标实现平移等操作





杂项知识：

1、当顶点缓冲区需要频繁的进行更新的时候，我们可以使用动态顶点缓冲区，一般使用UploadBuffer类实现动态顶点缓冲区，不过我们使用的是动态顶点缓冲区，我们还需要每次将顶点缓冲区中的新数据传入到常量缓冲区中，这会造成一些资源上的开销，因此，可以使用静态顶点缓冲区的时候尽量不要使用动态顶点缓冲区


2、在开启光照时，我们不会直接指出顶点的颜色，而是通过指定材质和光照，然后运用光照方程，计算出顶点的颜色


3、2D纹理是一种由特定数据元素所构成的矩阵，它的主要用处之一是存储2D图像数据，纹理中的每一个元素都存储着对应像素的颜色。


4、各向异性过滤器，该过滤器可以有效缓解当多边形法向量和摄像机观察向量之间的夹角过大时所导致的失真现象，不过这种过滤器会耗费极大的开销


5、D2D1_RECT_F是表示左上角和右下角定义的矩形


6、CreateDDSTextureFromFile方法
参数1：指向用于创建纹理资源的D3D设备的指针
参数2：提交GPU命令
参数3：欲加载的图像文件名
参数4：返回带有图像数据的纹理资源
参数5：返回的纹理资源



疑问：
1、根签名

2、为什么在帧资源中CPU必须在某些时刻等待GPU

3、线性插值法和常量插值法

4、点过滤器，线性过滤器，各向异性过滤器

5、为什么播放木箱动画的时候需要创建一次立方体？

6、为什么.和->的提示不一样

7、t0，b0，s0，

8、为什么顶点是24个，而不是8个？

9、DrawIndex三个参数的作用

10、控制着色器代码

11、着色器代码报错，粘贴复制后不报错

解决方法：

1、百度

2、翻书

3、问师兄


##存在问题
1、小组作业和大组作业不能按时提交（明明有时间，却还是浪到最后一刻）

2、没有过多的实践Direct3D的代码

3、花太多的时间在考核和打游戏上，专业课和基础课开始落下进度

4、锻炼身体的时间在减少



##下周规划
1、花多点时间在课程学习上

2、多点熬夜

3、多动手实践Xjun的教程代码，并开始自己的小项目
